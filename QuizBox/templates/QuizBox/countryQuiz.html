{% load static %}
<!DOCTYPE html>
<html>
<head>
	<meta name="viewport" content="width=device-width,initial-scale-1">
	<title>QuizHub</title>
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
	<script src="https://use.fontawesome.com/0f5b686ba4.js"></script>
	<link rel="stylesheet" href="{% static 'QuizBox/css/countryQuiz.css' %}">
	<style type="text/css">
		body{margin: 0;padding: 0;display: border-box;background: #fff;background-blend-mode: multiply;}
		.inputGroup .success:after {width: 32px;height: 32px;content: '';border: 2px solid #D1D7DC;background-color: #2ecc71;background-image: url("data:image/svg+xml,%3Csvg width='32' height='32' viewBox='0 0 32 32' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M5.414 11L4 12.414l5.414 5.414L20.828 6.414 19.414 5l-10 10z' fill='%23fff' fill-rule='nonzero'/%3E%3C/svg%3E ");background-repeat: no-repeat;background-position: 2px 3px;border-radius: 50%;z-index: 2;position: absolute;right: 30px;top: 50%;-webkit-transform: translateY(-50%);transform: translateY(-50%);cursor: pointer;-webkit-transition: all 200ms ease-in;transition: all 200ms ease-in;}
		.inputGroup .failed:after {width: 32px;height: 32px;content: '';border: 2px solid #D1D7DC;background-color: #e74c3c;background-image: url('{% static "QuizBox/images/error-svgrepo-com.svg" %}');background-repeat: no-repeat;background-position: center;border-radius: 50%;z-index: 3;position: absolute;right: 30px;top: 50%;-webkit-transform: translateY(-50%);transform: translateY(-50%);cursor: pointer;-webkit-transition: all 200ms ease-in;transition: all 200ms ease-in;}
	</style>
</head>
<body>
	<!-- Navbar -->
	<nav class="navbar navbar-expand-lg navbar-dark justify-content-between header">
	  <!-- Brand -->
	  <div class=" brand">
	  	<h1><a class="navbar-brand" href="{% url 'index' %}" >Quiz <i class="fa fa-puzzle-piece" aria-hidden="true"></i>
<span>Hub</span></a></h1>
	  </div>
	  <button class="navbar-toggler navbar-toggler-right nav-toggler bg-light" type="button" data-toggle="collapse" data-target="#navb">
	    <i class="fa fa-bars" aria-hidden="true"></i>

	  </button>

	  <!-- Links -->
	  <div class="collapse navbar-collapse" id="navb">
		  <div class="navbar col-lg-6 col-md-12 col-sm-12 col-12">
		  	  <div class="dropdown">
			  <button type="button" class="btn bg-light dropdown-toggle drpdwn" data-toggle="dropdown">
			    Country Quiz
			  </button>
			  <div class="dropdown-menu drpdwn-menu">
			    <a class="dropdown-item active" href="{% url 'countryQuiz' 1 %}">Country</a>
			    <a class="dropdown-item" href="#">Link 2</a>
			    <a class="dropdown-item" href="#">Link 3</a>
			  </div>
			</div>
		</div>
		<div class="navbar col-lg-6 col-md-12 col-sm-12 col-12 user_auth">
		  	<div class="dropdown">
			  <button type="button" class="btn btn-light dropdown-toggle" data-toggle="dropdown">
			    {{username}}
			  </button>
			  <div class="dropdown-menu dropdwn-menu">
			    <h5 class="dropdown-header">{{username}} Account</h5>
			    <a class="dropdown-item" href="{% url 'logout' %}">Log out</a>
			  </div><!-- end of dropdown-menu -->
			</div><!-- end of dropdown -->
		</div><!-- end of user_auth -->
	</div><!-- end of navbar-collapse -->
	</nav>
	<!-- end of Navbar -->

	<!-- quizbox -->

<div class="container-fluid quizbox">

		<div class="row">
			<div class="col-12 col-sm-12 dashboard-div d-block d-lg-none">
				<div class="dashboard">
					<div class="row">
						<div class="col-12" style="text-align: center;">
							<h1>Total Questions : {{total}}</h1>
						</div>
						<div class="col-6">
							<h1>Correct : {{correct}}</h1>
						</div>
						<div class="col-6">
							<h1>Wrong : {{wrong}}</h1>
						</div>
						<div class="col-12" style="text-align: center;">
							<h1>Accuracy : {{percentage}} %</h1>
						</div>
					</div>
				</div><!-- end of dashboard -->
			</div>

			<div class="col-lg-8 col-md-12 col-sm-12 col-12 tab-1">
				<div class="Qbox">
					<form action = "{% url 'nextCountryQuiz' quiz.id %}" method="post">
						{% csrf_token %}
						<h2>Q.<span name="id">{{quiz.id}}</span>: &nbsp;{{quiz.question}}</h2>
						<div class="inputGroup">
						    <input id="a" name="rbtn" type="radio" onclick="checkTheQuiz()" value="a"/>
						    <label for="a" class="label" id="label-a">{{quiz.a}}</label>
						  </div>
						  <div class="inputGroup">
						    <input id="b" name="rbtn" type="radio" onclick="checkTheQuiz()" value="b"/>
						    <label for="b" class="label" id="label-b">{{quiz.b}}</label>
						  </div>
						  <div class="inputGroup">
						    <input id="c" name="rbtn" type="radio" onclick="checkTheQuiz()" value="c"/>
						    <label for="c" class="label" id="label-c">{{quiz.c}}</label>
						  </div>
						  <div class="inputGroup">
						    <input id="d" name="rbtn" type="radio" onclick="checkTheQuiz()" value="d"/>
						    <label for="d" class="label" id="label-d">{{quiz.d}}</label>
						  </div>


						  <button class="btn btn-dark btn-lg Qbtn next" name="next" type="submit">Next</button>
					</form>
				</div><!-- end of Qbox -->
			</div><!-- end of tab-1 -->

			<div class="col-lg-4 col-md-12 col-sm-12 col-12 tab-2 dashboard-div d-none d-lg-block">
				<div class="dashboard">
					<div class="row">
						<div class="col-lg-12">
							<h1>Total Questions : {{total}}</h1>
						</div>
						<div class="col-lg-12">
							<h1>Correct Answers : {{correct}}</h1>
						</div>
						<div class="col-lg-12">
							<h1>Wrong Answers : {{wrong}}</h1>
						</div>
						<div class="col-lg-12">
							<h1>Accuracy : {{percentage}} %</h1>
						</div>
					</div>
				</div><!-- end of dashboard -->
			</div><!-- end of tab-2 -->
		</div><!-- end of row -->
	<!-- end of container -->
</div><!-- end of container-fluid -->

	<!-- end of quizbox -->
<script type="text/javascript">

function checkTheQuiz(){
	var answer = "{{quiz.answer}}";
	var radios = document.getElementsByName("rbtn");

	for(let i=0;i<radios.length;i++){
		if(radios[i].checked){
			let ans = radios[i].getAttribute("id");

			if(ans == answer){
				console.log("correct answer");

				var element = document.getElementById("label-"+answer);

				element.classList.add("success");
			}
			else{
				console.log("wrong answer");
				var element1 = document.getElementById("label-"+answer);
				var element2 = document.getElementById("label-"+ans)


				element2.classList.add("failed");
				element1.classList.add("success");

			}
		}
	}

	/* for(let i=0;i<radois.length;i++){
		let ans = radios[i].getAttribute("id");
		if(ans == answer){
			continue;
		}
		radios[i].disabled = true;
	} */
}

</script>
<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
</body>
</html>
